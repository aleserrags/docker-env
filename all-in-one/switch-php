#!/usr/bin/env bash
set -euo pipefail

if [ $# -ne 1 ]; then
  echo "Usage: switch-php <8.2|8.3|8.5>" >&2
  exit 1
fi

TARGET=$1
case "$TARGET" in
  8.2|8.3|8.5) ;;
  *) echo "Unsupported PHP version: $TARGET" >&2; exit 1;;
esac

update-alternatives --set php /usr/bin/php${TARGET}
update-alternatives --set phpize /usr/bin/phpize${TARGET}
update-alternatives --set php-config /usr/bin/php-config${TARGET}
php -v
